/*
 *  jQuery autocomplete address - v1.0.0
 *  A jQuery plugin to autocomplete address using the correio's CEP
 *  https://github.com/arthurfigueiredo/autocomplete-address
 *
 *  Made by Arthur Figueiredo
 */
!function(a,b,c,d){function e(b,c){this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f="autocompleteAddress",g={publicAPI:"https://viacep.com.br/ws/{{cep}}/json/",address:"",neighborhood:"",city:"",state:""};a.extend(e.prototype,{init:function(){self=this,$cep=a(this.element),$address=this.getData("autocomplete-address"),$neighborhood=this.getData("autocomplete-neighborhood"),$city=this.getData("autocomplete-city"),$state=this.getData("autocomplete-state"),currentCep=$cep.val(),$cep.mask&&$cep.mask("99999-999"),$cep.blur(function(){currentCep!==$cep.val()&&(currentCep=$cep.val().replace("-",""),self.sendRequest())})},getData:function(b){var c=a(this.settings[b.replace("autocomplete-","")]);return 0===c.length&&(c=a("."+b),0===c.length&&(c=a("[data-"+b+"]"))),c},sendRequest:function(){a.ajax({url:this.settings.publicAPI.replace("{{cep}}",currentCep),type:"GET",dataType:"json",success:function(a){self.bindValues(a)}})},bindValues:function(a){$address.val(a.logradouro),$neighborhood.val(a.bairro),$city.val(a.localidade),$state.val(a.uf),$state.children("option:contains('"+a.uf+"')").attr("selected","selected"),this.checkStatusField([$address,$neighborhood,$city,$state])},checkStatusField:function(b){for(var c=b.length;c--;)b[c].length>0&&a(b[c]).val().match(/[a-z]/i)?a(b[c]).addClass("disabled").attr("readonly","readonly"):a(b[c]).removeClass("disabled").removeAttr("readonly","readonly")}}),a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))}),this}}(jQuery,window,document);
